id: sample_report
title: Executive Summary
description: Daily performance snapshot combining SQL, REST, and CSV data feeds.
template: report.html.j2
components:
  - id: revenue_snapshot
    title: Revenue By Country
    provider: postgres_reporting
    timeout_seconds: 60
    query:
      text: |
        SELECT country,
               total_revenue,
               total_orders,
               updated_at
        FROM finance.revenue_summary
        WHERE updated_at = (
          SELECT max(updated_at) FROM finance.revenue_summary
        )
        ORDER BY total_revenue DESC
    render:
      type: table
      options:
        columns: [country, total_revenue, total_orders, updated_at]
  - id: pipeline_chart
    title: Sales Pipeline By Stage
    provider: csv_local
    query:
      path: pipeline.csv
    render:
      type: chart
      options:
        chart_type: bar
        x_field: stage
        y_field: amount
        color: owner
  - id: weather_summary
    title: Berlin Weather Snapshot
    provider: rest_weather
    query:
      endpoint: forecast
      params:
        latitude: 52.52
        longitude: 13.41
        current_weather: true
    render:
      type: text
      options:
        template: "Current temperature in Berlin: {value}°C"
        value_path: current_weather.temperature
email:
  to:
    - leadership@example.com
  subject_template: "Daily Executive Summary – {{ generated_at.strftime('%Y-%m-%d') }}"
schedule:
  cron: "0 7 * * 1-5"
  timezone: Europe/Berlin
  enabled: true
