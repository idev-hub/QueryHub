id: rating_distribution
title: Customer Rating Distribution
provider: postgres_test
query:
  text: "SELECT \n  rating,\n  COUNT(*) as count,\n  CAST(COUNT(*) * 100.0 / SUM(COUNT(*))\
    \ OVER () AS FLOAT) as percentage\nFROM customer_feedback\nGROUP BY rating\nORDER\
    \ BY rating DESC\n"
render:
  type: html
  options:
    template: "<div style=\"font-family: Arial, sans-serif;\">\n  {% for row in data\
      \ %}\n  <div style=\"margin-bottom: 12px;\">\n    <div style=\"display: flex;\
      \ justify-content: space-between; margin-bottom: 4px;\">\n      <span style=\"\
      font-weight: 500;\">{{ row.rating }} stars</span>\n      <span style=\"color:\
      \ #666;\">{{ row.count }} reviews ({{ \"{:.1f}\".format(row.percentage) }}%)</span>\n\
      \    </div>\n    <div style=\"background: #e0e0e0; height: 24px; border-radius:\
      \ 12px; overflow: hidden;\">\n      <div style=\"background: linear-gradient(90deg,\
      \ #4ade80 0%, #22c55e 100%); height: 100%; width: {{ row.percentage }}%; transition:\
      \ width 0.3s;\"></div>\n    </div>\n  </div>\n  {% endfor %}\n</div>\n"
